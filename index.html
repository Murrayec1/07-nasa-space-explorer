<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=yes, minimum-scale=1, maximum-scale=3" />
  <title>NASA Space Explorer</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- NASA Official Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Source+Sans+Pro:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    /* NASA Official Color Palette */
    :root {
      --nasa-blue: #0B3D91;
      --nasa-red: #FC3D21;
      --nasa-white: #FFFFFF;
      --nasa-black: #000000;
      --nasa-gray-light: #F5F5F5;
      --nasa-gray-medium: #979797;
      --nasa-gray-dark: #484848;
      --nasa-space-blue: #071844;
      --nasa-accent-blue: #3b82f6;
    }

    body {
      font-family: 'Inter', 'Source Sans Pro', 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(135deg, var(--nasa-blue) 0%, var(--nasa-space-blue) 100%);
      color: var(--nasa-white);
      min-height: 100vh;
      overflow-x: hidden;
      line-height: 1.6;
      font-size: 16px;
    }

    /* Responsive Container */
    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 15px;
    }

    /* Responsive Typography */
    @media (max-width: 576px) {
      body { font-size: 14px; }
    }

    @media (min-width: 1200px) {
      body { font-size: 18px; }
    }

    .navbar {
      background-color: var(--nasa-blue);
      border-bottom: 3px solid var(--nasa-red);
      padding: 0.75rem 0;
      position: sticky;
      top: 0;
      z-index: 1020;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }

    .navbar-brand {
      font-family: 'Inter', sans-serif;
      font-weight: 700;
      font-size: clamp(1.2rem, 4vw, 1.8rem);
      color: var(--nasa-white) !important;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .navbar-brand:hover {
      color: var(--nasa-white) !important;
    }

    .nasa-logo {
      height: clamp(30px, 6vw, 40px);
      width: auto;
      flex-shrink: 0;
    }

    .hero-section {
      text-align: center;
      padding: clamp(1rem, 4vw, 2rem) 0;
      margin-bottom: clamp(1rem, 3vw, 2rem);
    }

    .hero-section h1 {
      font-family: 'Inter', sans-serif;
      font-size: clamp(2rem, 6vw, 3rem);
      font-weight: 700;
      color: var(--nasa-white);
      margin-bottom: 1rem;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      line-height: 1.2;
    }

    .hero-section .lead {
      font-family: 'Source Sans Pro', sans-serif;
      font-size: clamp(1rem, 3vw, 1.2rem);
      color: var(--nasa-gray-light);
      max-width: 600px;
      margin: 0 auto;
    }

    .filters-section {
      background: rgba(11, 61, 145, 0.9);
      border: 2px solid var(--nasa-red);
      padding: clamp(1rem, 3vw, 1.5rem);
      border-radius: 8px;
      margin-bottom: clamp(1rem, 3vw, 2rem);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(5px);
    }

    .form-label {
      font-family: 'Source Sans Pro', sans-serif;
      font-weight: 600;
      color: var(--nasa-white);
      margin-bottom: 0.5rem;
      font-size: clamp(0.9rem, 2.5vw, 1rem);
    }

    .btn-space {
      background-color: var(--nasa-red);
      border: 2px solid var(--nasa-red);
      color: var(--nasa-white);
      font-family: 'Inter', sans-serif;
      font-weight: 600;
      padding: clamp(10px, 2.5vw, 12px) clamp(20px, 4vw, 30px);
      border-radius: 6px;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-size: clamp(0.8rem, 2.2vw, 1rem);
      width: 100%;
      min-height: 44px; /* Accessibility: minimum touch target */
    }

    .btn-space:hover, .btn-space:focus {
      background-color: #d63017;
      border-color: #d63017;
      color: var(--nasa-white);
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(252, 61, 33, 0.4);
      outline: 2px solid var(--nasa-white);
      outline-offset: 2px;
    }

    .btn-space:disabled {
      opacity: 0.7;
      cursor: not-allowed;
      transform: none;
    }

    .form-control {
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid var(--nasa-gray-medium);
      color: var(--nasa-white);
      border-radius: 6px;
      font-family: 'Source Sans Pro', sans-serif;
      font-size: clamp(0.9rem, 2.5vw, 1rem);
      padding: clamp(8px, 2vw, 12px);
      min-height: 44px; /* Accessibility: minimum touch target */
    }

    .form-control:focus {
      background: rgba(255, 255, 255, 0.15);
      border-color: var(--nasa-red);
      color: var(--nasa-white);
      box-shadow: 0 0 0 0.2rem rgba(252, 61, 33, 0.25);
      outline: none;
    }

    .form-control::placeholder {
      color: rgba(255, 255, 255, 0.6);
    }

    .gallery-card {
      background: var(--nasa-white);
      border: 2px solid var(--nasa-gray-light);
      border-radius: 8px;
      overflow: hidden;
      transition: all 0.3s ease;
      margin-bottom: 1.5rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      color: var(--nasa-black);
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .gallery-card:hover, .gallery-card:focus-within {
      transform: translateY(-4px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25);
      border-color: var(--nasa-red);
    }

    .gallery-card img {
      height: clamp(200px, 30vw, 250px);
      width: 100%;
      object-fit: cover;
      transition: transform 0.3s ease;
      cursor: pointer;
    }

    .gallery-card:hover img, .gallery-card:focus-within img {
      transform: scale(1.02);
    }

    .gallery-card .video-container {
      position: relative;
      height: clamp(200px, 30vw, 250px);
      background: var(--nasa-black);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      overflow: hidden;
    }

    .gallery-card .video-container iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    .gallery-card .video-placeholder {
      background: linear-gradient(135deg, var(--nasa-blue), var(--nasa-space-blue));
      color: var(--nasa-white);
      text-align: center;
      padding: clamp(1rem, 3vw, 2rem);
      border-radius: 8px 8px 0 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .gallery-card .video-placeholder .play-icon {
      font-size: clamp(2rem, 5vw, 3rem);
      margin-bottom: 0.5rem;
      color: var(--nasa-red);
    }

    .gallery-card .video-placeholder h6 {
      font-family: 'Inter', sans-serif;
      font-weight: 600;
      margin-bottom: 0.5rem;
      font-size: clamp(0.9rem, 2.5vw, 1.1rem);
    }

    .gallery-card .video-placeholder small {
      font-family: 'Source Sans Pro', sans-serif;
      color: var(--nasa-gray-light);
      font-size: clamp(0.8rem, 2vw, 0.9rem);
    }

    .gallery-card .card-body {
      padding: clamp(0.75rem, 2.5vw, 1rem);
      flex-grow: 1;
      display: flex;
      flex-direction: column;
    }

    .card-title {
      font-family: 'Inter', sans-serif;
      font-size: clamp(1rem, 2.5vw, 1.1rem);
      font-weight: 600;
      color: var(--nasa-blue);
      margin-bottom: 0.5rem;
      line-height: 1.3;
    }

    .card-text {
      font-family: 'Source Sans Pro', sans-serif;
      font-size: clamp(0.85rem, 2.2vw, 0.9rem);
      line-height: 1.5;
      color: var(--nasa-gray-dark);
      flex-grow: 1;
    }

    .card-date {
      font-family: 'Source Sans Pro', sans-serif;
      font-size: clamp(0.8rem, 2vw, 0.85rem);
      color: var(--nasa-red);
      font-weight: 600;
      margin-top: auto;
    }

    /* Custom Carousel Styles */
    .custom-carousel {
      margin: clamp(1rem, 3vw, 2rem) 0;
      position: relative;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }

    .custom-carousel-container {
      position: relative;
      overflow: hidden;
      border-radius: 12px;
      background: transparent;
    }

    .custom-carousel-track {
      position: relative;
      width: 100%;
      min-height: 500px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .custom-carousel-item {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      visibility: hidden;
      transition: all 0.4s ease-in-out;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: clamp(1rem, 2.5vw, 2rem);
    }

    .custom-carousel-item.active {
      opacity: 1;
      visibility: visible;
      position: relative;
    }

    .custom-carousel-item .gallery-card {
      width: 100%;
      max-width: 400px;
      margin: 0 auto;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
      border-radius: 12px;
      overflow: hidden;
      background: var(--nasa-white);
    }

    /* Custom Navigation Buttons */
    .custom-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 50px;
      height: 50px;
      background: rgba(252, 61, 33, 0.9);
      border: 2px solid var(--nasa-white);
      border-radius: 50%;
      color: var(--nasa-white);
      font-size: 24px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .custom-nav-prev {
      left: -25px;
    }

    .custom-nav-next {
      right: -25px;
    }

    .custom-nav:hover {
      background: var(--nasa-red);
      transform: translateY(-50%) scale(1.1);
      box-shadow: 0 4px 12px rgba(252, 61, 33, 0.4);
    }

    .custom-nav:active {
      transform: translateY(-50%) scale(0.95);
    }

    /* Custom Indicators */
    .custom-indicators {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 30px;
      margin-bottom: 0;
    }

    .custom-indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: 2px solid var(--nasa-red);
      background-color: transparent;
      cursor: pointer;
      transition: all 0.3s ease;
      opacity: 0.6;
    }

    .custom-indicator.active {
      background-color: var(--nasa-red);
      opacity: 1;
      transform: scale(1.2);
    }

    .custom-indicator:hover {
      opacity: 0.8;
      transform: scale(1.1);
    }

    /* Responsive custom carousel adjustments */
    @media (max-width: 768px) {
      .custom-nav {
        width: 40px;
        height: 40px;
        font-size: 20px;
      }

      .custom-nav-prev {
        left: -20px;
      }

      .custom-nav-next {
        right: -20px;
      }

      .custom-carousel-item {
        padding: 1rem;
      }

      .custom-carousel-track {
        min-height: 450px;
      }

      .custom-carousel-item .gallery-card {
        max-width: calc(100vw - 2rem);
      }
    }

    @media (max-width: 576px) {
      .custom-nav {
        width: 35px;
        height: 35px;
        font-size: 18px;
      }

      .custom-nav-prev {
        left: -17px;
      }

      .custom-nav-next {
        right: -17px;
      }

      .custom-carousel-item {
        padding: 0.5rem;
      }

      .custom-carousel-track {
        min-height: 400px;
      }
    }

    .modal-dialog {
      max-width: min(90vw, 800px);
      margin: 1rem auto;
    }

    .modal-content {
      background: var(--nasa-white);
      border: 3px solid var(--nasa-blue);
      border-radius: 8px;
      color: var(--nasa-black);
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal-header {
      background-color: var(--nasa-blue);
      color: var(--nasa-white);
      border-bottom: 2px solid var(--nasa-red);
      padding: clamp(0.75rem, 2.5vw, 1rem);
    }

    .modal-footer {
      background-color: var(--nasa-gray-light);
      border-top: 1px solid var(--nasa-gray-medium);
      padding: clamp(0.75rem, 2.5vw, 1rem);
    }

    .modal-title {
      font-family: 'Inter', sans-serif;
      color: var(--nasa-white);
      font-weight: 600;
      font-size: clamp(1.1rem, 3vw, 1.25rem);
      line-height: 1.3;
    }

    .modal-body {
      padding: clamp(1rem, 3vw, 1.5rem);
    }

    .modal-body img {
      border-radius: 6px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      max-width: 100%;
      height: auto;
    }

    .modal-body .video-container {
      position: relative;
      width: 100%;
      padding-bottom: 56.25%; /* 16:9 aspect ratio */
      height: 0;
      margin-bottom: 1rem;
    }

    .modal-body .video-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
      border-radius: 6px;
    }

    .modal-date {
      color: var(--nasa-red);
      font-family: 'Source Sans Pro', sans-serif;
      font-weight: 600;
      font-size: clamp(0.9rem, 2.5vw, 1rem);
    }

    .btn-close {
      filter: none;
      background: var(--nasa-white);
      font-size: 1.2rem;
      width: 44px;
      height: 44px;
    }

    .btn-close:hover, .btn-close:focus {
      opacity: 0.8;
      outline: 2px solid var(--nasa-red);
      outline-offset: 2px;
    }

    .btn-secondary {
      background-color: var(--nasa-gray-dark);
      border-color: var(--nasa-gray-dark);
      font-family: 'Inter', sans-serif;
      font-weight: 500;
      min-height: 44px;
      padding: clamp(8px, 2vw, 12px) clamp(16px, 3vw, 24px);
    }

    .btn-secondary:hover, .btn-secondary:focus {
      background-color: var(--nasa-black);
      border-color: var(--nasa-black);
      outline: 2px solid var(--nasa-red);
      outline-offset: 2px;
    }

    .card-title {
      font-family: 'Inter', sans-serif;
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--nasa-blue);
      margin-bottom: 0.5rem;
    }

    .card-text {
      font-family: 'Source Sans Pro', sans-serif;
      font-size: 0.9rem;
      line-height: 1.5;
      color: var(--nasa-gray-dark);
    }

    .card-date {
      font-family: 'Source Sans Pro', sans-serif;
      font-size: 0.85rem;
      color: var(--nasa-red);
      font-weight: 600;
    }

    .placeholder-content {
      text-align: center;
      padding: clamp(2rem, 5vw, 3rem);
      color: var(--nasa-gray-light);
    }

    .placeholder-content h3 {
      font-family: 'Inter', sans-serif;
      color: var(--nasa-white);
      font-weight: 600;
      font-size: clamp(1.5rem, 4vw, 2rem);
      margin-bottom: 1rem;
    }

    .placeholder-content p {
      font-size: clamp(1rem, 2.5vw, 1.1rem);
      max-width: 600px;
      margin: 0 auto;
      line-height: 1.6;
    }

    .placeholder-icon {
      font-size: clamp(3rem, 8vw, 4rem);
      margin-bottom: 1rem;
    }

    .loading-spinner {
      text-align: center;
      padding: clamp(2rem, 5vw, 3rem);
      color: var(--nasa-white);
    }

    .loading-spinner h4 {
      font-size: clamp(1.3rem, 3.5vw, 1.5rem);
      margin-bottom: 0.5rem;
    }

    .loading-spinner p {
      font-family: 'Source Sans Pro', sans-serif;
      font-weight: 500;
      font-size: clamp(0.9rem, 2.5vw, 1rem);
    }

    .spinner-border {
      color: var(--nasa-red) !important;
      width: clamp(2rem, 5vw, 3rem) !important;
      height: clamp(2rem, 5vw, 3rem) !important;
    }

    .error-message {
      background: rgba(252, 61, 33, 0.1);
      border: 2px solid var(--nasa-red);
      color: var(--nasa-white);
      padding: clamp(1rem, 3vw, 1.5rem);
      border-radius: 8px;
      text-align: center;
      font-family: 'Source Sans Pro', sans-serif;
      margin: clamp(1rem, 3vw, 2rem) 0;
    }

    .error-message h5 {
      font-family: 'Inter', sans-serif;
      font-weight: 600;
      font-size: clamp(1.1rem, 3vw, 1.25rem);
      margin-bottom: 0.75rem;
    }

    .error-message p {
      font-size: clamp(0.9rem, 2.5vw, 1rem);
      margin-bottom: 1rem;
    }

    /* Responsive Grid Adjustments */
    @media (max-width: 576px) {
      .col-lg-4, .col-md-6 {
        margin-bottom: 1rem;
      }
      
      .filters-section .row {
        gap: 0.75rem;
      }
    }

    /* High Contrast Mode Support */
    @media (prefers-contrast: high) {
      .gallery-card {
        border-width: 3px;
      }
      
      .btn-space {
        border-width: 3px;
      }
      
      .form-control {
        border-width: 3px;
      }
    }

    /* Reduced Motion Support */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
      
      .gallery-card:hover {
        transform: none;
      }
      
      .btn-space:hover {
        transform: none;
      }
    }

    /* Print Styles */
    @media print {
      .navbar, .filters-section, .modal {
        display: none !important;
      }
      
      .gallery-card {
        break-inside: avoid;
        margin-bottom: 1rem;
      }
      
      body {
        background: white !important;
        color: black !important;
      }
    }

    /* Did You Know Fact Popup */
    .fact-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      background: linear-gradient(135deg, var(--nasa-blue), var(--nasa-space-blue));
      color: var(--nasa-white);
      padding: clamp(1.5rem, 4vw, 2rem);
      border-radius: 12px;
      border: 3px solid var(--nasa-red);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
      z-index: 2000;
      max-width: min(90vw, 500px);
      text-align: center;
      transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
      backdrop-filter: blur(10px);
    }

    .fact-popup.show {
      transform: translate(-50%, -50%) scale(1);
    }

    .fact-popup .fact-header {
      font-family: 'Inter', sans-serif;
      font-size: clamp(1.2rem, 3.5vw, 1.5rem);
      font-weight: 700;
      color: var(--nasa-red);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .fact-popup .fact-text {
      font-family: 'Source Sans Pro', sans-serif;
      font-size: clamp(1rem, 2.8vw, 1.1rem);
      line-height: 1.6;
      margin-bottom: 1rem;
    }

    .fact-popup .fact-footer {
      font-family: 'Inter', sans-serif;
      font-size: clamp(0.8rem, 2.2vw, 0.9rem);
      color: var(--nasa-gray-light);
      font-weight: 500;
    }

    .fact-popup .close-fact {
      position: absolute;
      top: 0.75rem;
      right: 0.75rem;
      background: var(--nasa-red);
      color: var(--nasa-white);
      border: none;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      font-size: 1rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .fact-popup .close-fact:hover {
      background: #d63017;
      transform: scale(1.1);
    }

    /* Overlay for fact popup */
    .fact-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      z-index: 1999;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .fact-overlay.show {
      opacity: 1;
      visibility: visible;
    }
  </style>  </head>
<body>
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg" role="navigation" aria-label="Main navigation">
    <div class="container">
      <a class="navbar-brand" href="#" aria-label="NASA Space Explorer Home">
        <img src="https://upload.wikimedia.org/wikipedia/commons/e/e5/NASA_logo.svg" alt="NASA Logo" class="nasa-logo">
        Space Explorer
      </a>
    </div>
  </nav>

  <!-- Main Container -->
  <div class="container">
    <!-- Hero Section -->
    <header class="hero-section" role="banner">
      <h1>🚀 Explore the Cosmos</h1>
      <p class="lead">Discover NASA's Astronomy Picture of the Day collection</p>
    </header>

    <!-- Filters Section -->
    <section class="filters-section" aria-label="Date selection filters">
      <div class="row g-3 align-items-end">
        <div class="col-md-4">
          <label for="startDate" class="form-label">Start Date</label>
          <input type="date" 
                 class="form-control" 
                 id="startDate" 
                 aria-describedby="startDateHelp"
                 required>
          <div id="startDateHelp" class="visually-hidden">Select the beginning date for your search range</div>
        </div>
        <div class="col-md-4">
          <label for="endDate" class="form-label">End Date</label>
          <input type="date" 
                 class="form-control" 
                 id="endDate" 
                 aria-describedby="endDateHelp"
                 required>
          <div id="endDateHelp" class="visually-hidden">Select the ending date for your search range</div>
        </div>
        <div class="col-md-4">
          <button class="btn btn-space" 
                  id="fetchBtn" 
                  aria-describedby="fetchBtnHelp">
            🔭 Get Space Images
          </button>
          <div id="fetchBtnHelp" class="visually-hidden">Search for NASA astronomy images in the selected date range</div>
        </div>
      </div>
    </section>

    <!-- Gallery Section -->
    <main class="gallery-section" role="main" aria-label="Image gallery">
      <div id="gallery" class="carousel-container" role="region" aria-live="polite" aria-label="Gallery results">
        <!-- Placeholder content -->
        <div class="placeholder-content">
          <div class="placeholder-icon" role="img" aria-label="Telescope emoji">🌌</div>
          <h3>Ready to Explore?</h3>
          <p>Select a date range and click "Get Space Images" to discover amazing astronomy photos!</p>
        </div>
      </div>
    </main>
  </div>

  <!-- Did You Know Fact Popup -->
  <div class="fact-overlay" id="factOverlay"></div>
  <div class="fact-popup" id="factPopup">
    <button class="close-fact" id="closeFact" aria-label="Close fact">×</button>
    <div class="fact-header">
      <span>🚀</span>
      <span>Did You Know?</span>
      <span>🌌</span>
    </div>
    <div class="fact-text" id="factText">
      Amazing space fact will appear here!
    </div>
    <div class="fact-footer">
      NASA Space Explorer • Fun Facts
    </div>
  </div>

  <!-- Image Modal -->
  <div class="modal fade" 
       id="imageModal" 
       tabindex="-1" 
       aria-labelledby="imageModalLabel" 
       aria-hidden="true"
       role="dialog">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="imageModalLabel">Image Title</h5>
          <button type="button" 
                  class="btn-close" 
                  data-bs-dismiss="modal" 
                  aria-label="Close modal">
          </button>
        </div>
        <div class="modal-body text-center">
          <img src="" 
               alt="" 
               class="img-fluid mb-3" 
               id="modalImage"
               loading="lazy">
          <p class="modal-date mb-2" id="modalDate">📅 Date</p>
          <p class="text-dark" id="modalExplanation">Explanation text will appear here...</p>
        </div>
        <div class="modal-footer">
          <button type="button" 
                  class="btn btn-secondary" 
                  data-bs-dismiss="modal">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Array of 20 fascinating space and NASA facts
    const spaceFacts = [
      "One day on Venus is longer than its year! Venus takes 243 Earth days to rotate once, but only 225 Earth days to orbit the Sun.",
      "NASA's Voyager 1 spacecraft, launched in 1977, is now over 14 billion miles from Earth and still sending data back to us!",
      "A teaspoon of neutron star material would weigh about 6 billion tons on Earth - that's heavier than Mount Everest!",
      "The International Space Station travels at 17,500 mph and orbits Earth every 90 minutes, seeing 16 sunrises and sunsets daily.",
      "Jupiter's Great Red Spot is a storm that has been raging for over 400 years and is larger than three Earths combined!",
      "Saturn's moon Titan has lakes and rivers made of liquid methane and ethane instead of water.",
      "The footprints left by Apollo astronauts on the Moon will last for millions of years because there's no wind or rain to erode them.",
      "NASA's Perseverance rover is currently searching for signs of ancient life on Mars and has already found organic molecules!",
      "The Hubble Space Telescope has been operating for over 30 years and has taken more than 1.5 million observations.",
      "One million Earths could fit inside the Sun, yet the Sun is considered a medium-sized star in our galaxy!",
      "The James Webb Space Telescope can see galaxies that formed when the universe was only 400 million years old.",
      "Astronauts grow about 2 inches taller in space because their spines stretch out in zero gravity.",
      "The coldest place in the universe that we know of is the Boomerang Nebula at -458°F, just 1 degree above absolute zero.",
      "Mars has the largest volcano in our solar system - Olympus Mons is 13.6 miles high, nearly three times taller than Mount Everest!",
      "The Milky Way galaxy is on a collision course with the Andromeda galaxy, but they won't meet for another 4.5 billion years.",
      "NASA's Parker Solar Probe is the fastest human-made object ever, reaching speeds of up to 430,000 mph!",
      "There are more possible games of chess than there are atoms in the observable universe - about 10^120 possibilities!",
      "A day on Mercury experiences temperature swings of over 1,000°F, from 800°F during the day to -300°F at night.",
      "The asteroid belt between Mars and Jupiter contains millions of asteroids, but they're so spread out that spacecraft easily navigate through them.",
      "NASA has detected water vapor on Jupiter's moon Europa, suggesting it might have twice as much water as all Earth's oceans combined!"
    ];

    // Get DOM elements using Bootstrap-friendly selectors
    const gallery = document.getElementById("gallery");
    const fetchBtn = document.getElementById("fetchBtn");
    const startDateInput = document.getElementById("startDate");
    const endDateInput = document.getElementById("endDate");

    // Fact popup elements
    const factPopup = document.getElementById("factPopup");
    const factOverlay = document.getElementById("factOverlay");
    const factText = document.getElementById("factText");
    const closeFact = document.getElementById("closeFact");

    // Fact system variables
    let factTimer;
    let factDisplayTimer;
    let currentFactIndex = 0;
    let factSystemActive = true;

    // Initialize fact system
    function initFactSystem() {
      // Start showing facts after 30 seconds, then every 3 minutes
      setTimeout(() => {
        if (factSystemActive) {
          showRandomFact();
          startFactTimer();
        }
      }, 30000); // 30 seconds delay for first fact
    }

    // Start the periodic fact timer
    function startFactTimer() {
      factTimer = setInterval(() => {
        if (factSystemActive && !document.querySelector('.modal.show')) {
          showRandomFact();
        }
      }, 180000); // 3 minutes = 180,000 milliseconds
    }

    // Show a random fact
    function showRandomFact() {
      // Don't show facts if modal is open or user is actively using the app
      if (document.querySelector('.modal.show') || fetchBtn.disabled) {
        return;
      }

      // Get a random fact
      const randomIndex = Math.floor(Math.random() * spaceFacts.length);
      factText.textContent = spaceFacts[randomIndex];

      // Show the fact popup
      factOverlay.classList.add('show');
      factPopup.classList.add('show');

      // Auto-hide after 5 seconds
      factDisplayTimer = setTimeout(hideFact, 5000);
    }

    // Hide the fact popup
    function hideFact() {
      factOverlay.classList.remove('show');
      factPopup.classList.remove('show');
      if (factDisplayTimer) {
        clearTimeout(factDisplayTimer);
      }
    }

    // Event listeners for fact popup
    closeFact.addEventListener('click', hideFact);
    factOverlay.addEventListener('click', hideFact);

    // Pause fact system when user is actively using the app
    function pauseFactSystem() {
      factSystemActive = false;
      if (factTimer) {
        clearInterval(factTimer);
      }
      hideFact();
    }

    // Resume fact system after user inactivity
    function resumeFactSystem() {
      factSystemActive = true;
      startFactTimer();
    }

    // Pause facts when user interacts with the app
    fetchBtn.addEventListener('click', () => {
      pauseFactSystem();
      // Resume after 60 seconds of completing the fetch
      setTimeout(() => {
        if (!fetchBtn.disabled) {
          resumeFactSystem();
        }
      }, 60000);
    });

    // Initialize the fact system when page loads
    document.addEventListener('DOMContentLoaded', initFactSystem);

    // NASA API key - DEMO_KEY has limited requests (30 per hour, 50 per day)
    // For production use, get a free API key from https://api.nasa.gov/
    const API_KEY = "DEMO_KEY";
    const NASA_APOD_URL = "https://api.nasa.gov/planetary/apod";

    // Global variable to track keyboard handler for carousel
    let currentCarouselKeyboardHandler = null;

    // Event listener for the "Get Space Images" button
    fetchBtn.addEventListener("click", () => {
      const startDate = startDateInput.value;
      const endDate = endDateInput.value;

      // Validate that both dates are selected
      if (!startDate || !endDate) {
        alert("Please select both a start and end date.");
        return;
      }

      // Validate that start date is not after end date
      if (startDate > endDate) {
        alert("Start date cannot be after end date.");
        return;
      }

      // Calculate the number of days between start and end date
      const start = new Date(startDate);
      const end = new Date(endDate);
      const daysDifference = Math.ceil((end - start) / (1000 * 60 * 60 * 24)) + 1;

      // Limit to 9 items for better gallery display
      if (daysDifference > 9) {
        alert("Please select a date range of 9 days or less for optimal gallery display.");
        return;
      }

      // Fetch APOD images for the selected date range
      fetchApodImages(startDate, endDate);
    });

    // Fetch APOD (Astronomy Picture of the Day) images from NASA API
    // This function fetches data for consecutive days between startDate and endDate
    async function fetchApodImages(startDate, endDate) {
      // Disable the fetch button to prevent multiple requests
      fetchBtn.disabled = true;
      fetchBtn.innerHTML = '⏳ Loading...';

      // Show loading spinner while fetching data
      gallery.innerHTML = `
        <div class="loading-spinner">
          <div class="spinner-border" role="status" style="color: var(--nasa-red); width: 3rem; height: 3rem;">
            <span class="visually-hidden">Loading...</span>
          </div>
          <h4 class="mt-3" style="color: var(--nasa-white);">🚀 Fetching Space Images</h4>
          <p class="mt-2" style="color: var(--nasa-gray-light);">Connecting to NASA's servers...</p>
        </div>
      `;

      try {
        // Build the API URL with parameters:
        // - api_key: Authentication key for NASA API
        // - start_date: Beginning of date range (YYYY-MM-DD format)
        // - end_date: End of date range (YYYY-MM-DD format)
        const response = await fetch(
          `${NASA_APOD_URL}?api_key=${API_KEY}&start_date=${startDate}&end_date=${endDate}`
        );

        // Check if the API request was successful
        if (!response.ok) {
          throw new Error(`Failed to fetch data from NASA API. Status: ${response.status}`);
        }

        // Parse the JSON response from the API
        const data = await response.json();
        
        // Display the fetched images in the gallery (this removes the loading message)
        displayGallery(data);
      } catch (error) {
        // Display error message if something goes wrong (this also removes the loading message)
        gallery.innerHTML = `
          <div class="error-message">
            <h5>⚠️ Error</h5>
            <p>${error.message}</p>
            <button class="btn btn-space mt-2" onclick="location.reload()">Try Again</button>
          </div>
        `;
        console.error("API Error:", error);
      } finally {
        // Re-enable the fetch button and restore original text
        fetchBtn.disabled = false;
        fetchBtn.innerHTML = '🔭 Get Space Images';
      }
    }

    // Display the gallery of APOD images using a custom carousel system
    // Creates a simple, reliable carousel with manual navigation controls
    function displayGallery(images) {
      // Check if any images were returned
      if (images.length === 0) {
        gallery.innerHTML = `
          <div class="placeholder-content">
            <div class="placeholder-icon">😕</div>
            <h3>No Images Found</h3>
            <p>No images found for the selected date range. Try different dates!</p>
          </div>
        `;
        return;
      }

      // Filter to show both images and videos, limit to 9 items
      const mediaItems = images
        .filter((item) => item.media_type === "image" || item.media_type === "video")
        .slice(0, 9);

      console.log(`Creating custom carousel with ${mediaItems.length} items`);

      // Create cards HTML
      const cardsHTML = mediaItems.map((item, index) => {
        const isVideo = item.media_type === "video";
        
        const mediaContent = isVideo ? 
          `<div class="video-container" onclick="openImageModal('${item.url}', '${escapeHtml(item.title)}', '${item.date}', '${escapeHtml(item.explanation)}', true)">
            <div class="video-placeholder">
              <div class="play-icon">▶️</div>
              <h6>Video Content</h6>
              <small>Click to watch</small>
            </div>
           </div>` :
          `<img src="${item.url}" 
               class="card-img-top" 
               alt="${item.title}" 
               loading="lazy"
               onclick="openImageModal('${item.url}', '${escapeHtml(item.title)}', '${item.date}', '${escapeHtml(item.explanation)}', false)">`;
        
        return `
        <div class="custom-carousel-item ${index === 0 ? 'active' : ''}" data-index="${index}">
          <div class="gallery-card h-100">
            ${mediaContent}
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">${isVideo ? '🎬 ' : ''}${item.title}</h5>
              <p class="card-text flex-grow-1">${truncateText(item.explanation, 150)}</p>
              <div class="mt-auto">
                <small class="card-date">📅 ${formatDate(item.date)}</small>
                ${isVideo ? '<small class="d-block mt-1" style="color: var(--nasa-red); font-weight: 600;">🎥 Video Content</small>' : ''}
              </div>
            </div>
          </div>
        </div>
        `;
      }).join('');

      // Create indicators
      const indicatorsHTML = mediaItems.map((_, index) => 
        `<button class="custom-indicator ${index === 0 ? 'active' : ''}" 
                 data-index="${index}" 
                 aria-label="Go to slide ${index + 1}">
         </button>`
      ).join('');

      // Create the complete custom carousel HTML
      const carouselHTML = `
        <div class="custom-carousel" id="customCarousel">
          <div class="custom-carousel-container">
            <div class="custom-carousel-track">
              ${cardsHTML}
            </div>
          </div>
          
          <button class="custom-nav custom-nav-prev" id="customPrev" aria-label="Previous image">
            <span>‹</span>
          </button>
          
          <button class="custom-nav custom-nav-next" id="customNext" aria-label="Next image">
            <span>›</span>
          </button>
          
          <div class="custom-indicators">
            ${indicatorsHTML}
          </div>
        </div>
      `;

      // Insert the carousel into the gallery
      gallery.innerHTML = carouselHTML;
      
      // Initialize custom carousel functionality
      initCustomCarousel(mediaItems.length);
      
      // Log the number of items displayed
      const imageCount = mediaItems.filter(item => item.media_type === "image").length;
      const videoCount = mediaItems.filter(item => item.media_type === "video").length;
      console.log(`📊 Custom carousel created: ${mediaItems.length} items (${imageCount} images, ${videoCount} videos)`);
    }

    // Initialize custom carousel functionality
    function initCustomCarousel(totalItems) {
      let currentIndex = 0;
      
      const items = document.querySelectorAll('.custom-carousel-item');
      const indicators = document.querySelectorAll('.custom-indicator');
      const prevBtn = document.getElementById('customPrev');
      const nextBtn = document.getElementById('customNext');
      
      console.log('🎛️ Initializing custom carousel with', totalItems, 'items');

      // Function to show specific slide
      function showSlide(index) {
        // Hide all items
        items.forEach((item, i) => {
          item.classList.remove('active');
          indicators[i].classList.remove('active');
        });
        
        // Show current item
        if (items[index] && indicators[index]) {
          items[index].classList.add('active');
          indicators[index].classList.add('active');
        }
        
        currentIndex = index;
        console.log(`📍 Showing slide ${index + 1} of ${totalItems}`);
      }

      // Navigation functions
      function goNext() {
        const nextIndex = (currentIndex + 1) % totalItems;
        showSlide(nextIndex);
      }

      function goPrev() {
        const prevIndex = (currentIndex - 1 + totalItems) % totalItems;
        showSlide(prevIndex);
      }

      // Event listeners for navigation buttons
      nextBtn.addEventListener('click', () => {
        console.log('➡️ Next button clicked');
        goNext();
      });

      prevBtn.addEventListener('click', () => {
        console.log('⬅️ Previous button clicked');
        goPrev();
      });

      // Event listeners for indicators
      indicators.forEach((indicator, index) => {
        indicator.addEventListener('click', () => {
          console.log(`🎯 Indicator ${index + 1} clicked`);
          showSlide(index);
        });
      });

      // Clean up any existing keyboard listeners
      if (currentCarouselKeyboardHandler) {
        document.removeEventListener('keydown', currentCarouselKeyboardHandler);
      }

      // Keyboard navigation
      currentCarouselKeyboardHandler = function(e) {
        // Only handle keys if no modal is open and carousel exists
        if (document.querySelector('.modal.show') || !document.getElementById('customCarousel')) return;
        
        if (e.key === 'ArrowLeft') {
          e.preventDefault();
          console.log('⬅️ Keyboard: Previous');
          goPrev();
        } else if (e.key === 'ArrowRight') {
          e.preventDefault();
          console.log('➡️ Keyboard: Next');
          goNext();
        }
      };

      document.addEventListener('keydown', currentCarouselKeyboardHandler);
      
      console.log('✅ Custom carousel initialized successfully');
    }

    // Helper function to truncate text for better card display
    function truncateText(text, maxLength) {
      if (text.length <= maxLength) return text;
      return text.substring(0, maxLength) + "...";
    }

    // Helper function to format date nicely
    function formatDate(dateString) {
      const date = new Date(dateString);
      return date.toLocaleDateString('en-US', { 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric' 
      });
    }

    // Helper function to escape HTML characters for safe insertion
    function escapeHtml(text) {
      const map = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#039;'
      };
      return text.replace(/[&<>"']/g, function(m) { return map[m]; });
    }

    // Helper function to extract YouTube video ID from URL
    function getYouTubeVideoId(url) {
      const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
      const match = url.match(regExp);
      return (match && match[2].length === 11) ? match[2] : null;
    }

    // Helper function to check if URL is a YouTube video
    function isYouTubeVideo(url) {
      return url.includes('youtube.com') || url.includes('youtu.be');
    }

    // Function to open the image/video modal with full details
    function openImageModal(mediaUrl, title, date, explanation, isVideo = false) {
      // Get modal elements
      const modal = new bootstrap.Modal(document.getElementById('imageModal'));
      const modalTitle = document.getElementById('imageModalLabel');
      const modalImage = document.getElementById('modalImage');
      const modalDate = document.getElementById('modalDate');
      const modalExplanation = document.getElementById('modalExplanation');

      // Set modal title and text content
      modalTitle.textContent = title;
      modalDate.textContent = `📅 ${formatDate(date)}`;
      modalExplanation.textContent = explanation;

      // Handle video or image content
      if (isVideo) {
        // Check if it's a YouTube video for embedding
        if (isYouTubeVideo(mediaUrl)) {
          const videoId = getYouTubeVideoId(mediaUrl);
          if (videoId) {
            // Create responsive YouTube embed
            modalImage.style.display = 'none';
            const videoContainer = document.createElement('div');
            videoContainer.className = 'video-container';
            videoContainer.innerHTML = `
              <iframe src="https://www.youtube.com/embed/${videoId}" 
                      allowfullscreen 
                      title="${title}">
              </iframe>
            `;
            modalImage.parentNode.insertBefore(videoContainer, modalImage);
          } else {
            // Fallback: show link for non-embeddable videos
            showVideoLink(mediaUrl, title, modalImage);
          }
        } else {
          // For non-YouTube videos, show a link
          showVideoLink(mediaUrl, title, modalImage);
        }
      } else {
        // Handle regular images
        // Remove any existing video containers
        const existingVideo = modalImage.parentNode.querySelector('.video-container');
        if (existingVideo) {
          existingVideo.remove();
        }
        
        modalImage.style.display = 'block';
        modalImage.src = mediaUrl;
        modalImage.alt = title;
      }

      // Show the modal
      modal.show();
    }

    // Helper function to show video link when embedding is not possible
    function showVideoLink(videoUrl, title, modalImage) {
      modalImage.style.display = 'none';
      const videoLinkContainer = document.createElement('div');
      videoLinkContainer.className = 'video-container';
      videoLinkContainer.style.padding = '2rem';
      videoLinkContainer.style.background = 'linear-gradient(135deg, var(--nasa-blue), var(--nasa-space-blue))';
      videoLinkContainer.style.borderRadius = '8px';
      videoLinkContainer.style.textAlign = 'center';
      videoLinkContainer.innerHTML = `
        <div style="color: var(--nasa-white);">
          <div style="font-size: 3rem; margin-bottom: 1rem; color: var(--nasa-red);">🎬</div>
          <h5 style="color: var(--nasa-white); margin-bottom: 1rem;">Video Content</h5>
          <a href="${videoUrl}" 
             target="_blank" 
             class="btn btn-space"
             style="text-decoration: none;">
            ▶️ Watch Video
          </a>
          <p style="margin-top: 1rem; font-size: 0.9rem; color: var(--nasa-gray-light);">
            Opens in a new tab
          </p>
        </div>
      `;
      modalImage.parentNode.insertBefore(videoLinkContainer, modalImage);
    }
  </script>
</body>
</html>
